<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>CostApp Mobile</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        body { 
            font-family: 'Kanit', sans-serif; 
            background-color: #f1f5f9;
            /* ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏õ‡∏°‡∏≤‡∏ó‡∏µ‡πà‡∏ô‡πà‡∏≤‡∏£‡∏≥‡∏Ñ‡∏≤‡∏ç‡∏ö‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠ */
            overflow-x: hidden; 
        }
        /* ‡∏õ‡∏£‡∏±‡∏ö‡πÉ‡∏´‡πâ Input ‡∏™‡∏ß‡∏¢‡∏á‡∏≤‡∏°‡∏ö‡∏ô iOS */
        input {
            -webkit-appearance: none;
            border-radius: 0.75rem;
        }
        /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏ô‡∏≤‡∏î‡∏à‡∏∏‡∏î‡∏™‡∏±‡∏°‡∏ú‡∏±‡∏™ (Touch Target) */
        button, input {
            min-height: 48px;
        }
    </style>
</head>
<body class="safe-area-inset-bottom">

    <div class="max-w-md mx-auto min-h-screen flex flex-col p-4 md:p-6">
        
        <div class="bg-gradient-to-br from-indigo-600 to-blue-700 rounded-3xl shadow-xl p-6 mb-6 text-white">
            <h1 class="text-2xl font-bold">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô</h1>
            <p class="text-blue-100 text-sm opacity-90">‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏£‡∏∞‡∏ö‡∏ö Cloud ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢</p>
        </div>

        <div class="bg-white rounded-3xl shadow-md p-6 flex-grow space-y-5">
            
            <div>
                <label class="block text-sm font-semibold text-gray-500 mb-1 ml-1">‡∏ä‡∏∑‡πà‡∏≠‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</label>
                <input type="text" id="itemName" 
                    class="w-full border-2 border-gray-100 bg-gray-50 p-4 rounded-2xl focus:bg-white focus:border-indigo-500 outline-none transition-all text-lg" 
                    placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡πÄ‡∏Ñ‡πâ‡∏Å‡∏™‡πâ‡∏°">
            </div>

            <div class="grid grid-cols-2 gap-4">
                <div>
                    <label class="block text-sm font-semibold text-gray-500 mb-1 ml-1 text-center md:text-left">‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏£‡∏ß‡∏° (‡∏ø)</label>
                    <input type="number" id="totalCost" 
                        class="w-full border-2 border-gray-100 bg-gray-50 p-4 rounded-2xl focus:bg-white focus:border-indigo-500 outline-none text-center text-lg" 
                        inputmode="decimal" placeholder="0.00">
                </div>
                <div>
                    <label class="block text-sm font-semibold text-gray-500 mb-1 ml-1 text-center md:text-left">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ (‡∏ä‡∏¥‡πâ‡∏ô)</label>
                    <input type="number" id="yield" 
                        class="w-full border-2 border-gray-100 bg-gray-50 p-4 rounded-2xl focus:bg-white focus:border-indigo-500 outline-none text-center text-lg" 
                        inputmode="numeric" value="1">
                </div>
            </div>

            <div>
                <label class="block text-sm font-semibold text-gray-500 mb-1 ml-1">‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Ç‡∏≤‡∏¢‡∏ï‡πà‡∏≠‡∏ä‡∏¥‡πâ‡∏ô (‡∏ø)</label>
                <input type="number" id="salePrice" 
                    class="w-full border-2 border-gray-100 bg-gray-50 p-4 rounded-2xl focus:bg-white focus:border-indigo-500 outline-none text-lg" 
                    inputmode="decimal" placeholder="0.00">
            </div>

            <div class="pt-4">
                <button onclick="sendToSheet()" id="btnSubmit" 
                    class="w-full bg-indigo-600 active:bg-indigo-800 text-white font-bold py-5 rounded-2xl shadow-lg shadow-indigo-100 transition-all transform active:scale-95 text-lg">
                    <span id="btnText text-xl">üöÄ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</span>
                </button>
            </div>

            <div id="statusBox" class="hidden p-4 rounded-2xl text-center text-sm font-bold animate-pulse"></div>
        </div>

        <footer class="mt-8 text-center text-gray-400 text-xs">
            <p>¬© 2026 ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô Cloud Sync</p>
        </footer>
    </div>

    <script>
        const GOOGLE_SCRIPT_URL = "https://script.google.com/macros/s/AKfycbyfFHepwHdb25rlyggYKu9cDUHRZSfffXP87N7j45gbGLDAb4CBDcE6hq7NCnftAeeVzw/exec";

        async function sendToSheet() {
            const btn = document.getElementById('btnSubmit');
            const btnText = document.getElementById('btnText');
            const statusBox = document.getElementById('statusBox');

            const payload = {
                name: document.getElementById('itemName').value,
                cost: parseFloat(document.getElementById('totalCost').value),
                sale: parseFloat(document.getElementById('salePrice').value),
                yield: parseInt(document.getElementById('yield').value)
            };

            if (!payload.name || isNaN(payload.cost)) {
                updateStatus("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö", "bg-red-100 text-red-500");
                return;
            }

            btn.disabled = true;
            btn.classList.add('opacity-50');
            updateStatus("‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å...", "bg-indigo-50 text-indigo-600");

            try {
                await fetch(GOOGLE_SCRIPT_URL, {
                    method: 'POST',
                    mode: 'no-cors',
                    body: JSON.stringify(payload)
                });

                updateStatus("‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!", "bg-green-100 text-green-600");
                
                // ‡∏•‡πâ‡∏≤‡∏á‡∏Ñ‡πà‡∏≤
                document.getElementById('itemName').value = "";
                document.getElementById('totalCost').value = "";
                document.getElementById('salePrice').value = "";
                document.getElementById('yield').value = "1";

            } catch (error) {
                updateStatus("‚ùå ‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà", "bg-red-100 text-red-600");
            } finally {
                btn.disabled = false;
                btn.classList.remove('opacity-50');
            }
        }

        function updateStatus(msg, classes) {
            statusBox.innerText = msg;
            statusBox.className = `p-4 rounded-2xl text-center font-bold ${classes}`;
            statusBox.classList.remove('hidden');
            // ‡∏ã‡πà‡∏≠‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å 3 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
            setTimeout(() => { statusBox.classList.add('hidden'); }, 3000);
        }
    </script>
</body>
</html>